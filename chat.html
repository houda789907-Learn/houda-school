<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>صديق الوحدة</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
      background-color: #000000; /* خلفية سوداء */
      color: #FFD700; /* نص ذهبي */
    }

    header {
      padding: 15px;
      background-color: #000000;
      color: #FFD700;
      font-size: 24px;
      text-align: center;
      font-weight: bold;
    }

    #chatBox {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .message {
      margin: 10px 0;
      padding: 10px 15px;
      border-radius: 20px;
      max-width: 80%;
      word-wrap: break-word;
    }

    .user {
      background-color: #0d6efd;
      color: white;
      margin-right: auto; /* رسائل المستخدم على الشمال */
      text-align: left;
    }

    .ai {
      background-color: #333333;
      color: #FFD700;
      margin-left: auto; /* رسائل AI على اليمين */
      text-align: right;
    }

    #inputContainer {
      display: flex;
      padding: 10px;
      border-top: 1px solid #444;
      background-color: #111111;
    }

    #userMessage {
      flex: 1;
      padding: 10px;
      border-radius: 20px;
      border: 1px solid #444;
      outline: none;
      font-size: 16px;
      background-color: #222222;
      color: #FFD700;
    }

    button {
      margin-left: 10px;
      padding: 10px 15px;
      border: none;
      border-radius: 50%;
      font-size: 20px;      cursor: pointer;
      background-color: #0d6efd;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    button:hover {
      opacity: 0.9;
    }

    #imageBtn {
      background-color: #FFD700;
      color: black;
    }

    input[type="file"] {
      display: none;
    }
  </style>
</head>
<body>

  <header>صديق الوحدة</
/* Login Form */
#login {
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:15px;
  text-align:center;
  height:100vh;
}
#login input {
  padding:10px;
  width:250px;
  border-radius:5px;
  border:none;
  font-size:16px;
}
#login button {
  padding:10px 20px;
  background-color:#FFD700;
  color:#000;
  font-weight:bold;
  border:none;
  border-radius:50px;
  cursor:pointer;
}

/* Main Page */
#main {
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100vh;
  text-align:center;
  color:#FFD700;
}
#main h1 { font-size:36px; margin-bottom:30px; }
#startChat {
  width:80px; height:80px;
  border-radius:50%;
  background-color:#FFD700;
  border:none;
  font-weight:bold;
  font-size:18px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#000;
  margin-bottom:30px;
}
.name { font-size:22px; font-weight:bold; margin:10px 0; }

</style>
</head>
<body>


<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gangno AI Chat</title>
<style>
body, html{
  margin:0; padding:0;
  font-family:Arial,sans-serif;
  background-color:#111;
  color:#FFD700;
  height:100%;
  display:flex;
  flex-direction:column;
}
#userInfo {
  display:flex;
  gap:15px;
  padding:10px;
  background:#222;
}
#userInfo div { font-weight:bold; }
#userInfo button{
  margin-left:auto;
  padding:5px 10px;
  background:#FFD700;
  color:#000;
  border:none;
  border-radius:5px;
  cursor:pointer;
}
#chatBox{
  flex:1;
  overflow-y:auto;
  padding:15px;
}
.userMsg{
  text-align:left;
  margin:10px 0;
}
.aiMsg{
  text-align:right;
  margin:10px 0;
}
#inputArea{
  display:flex;
  padding:10px;
  background:#222;
  gap:10px;
}
#inputArea input{
  flex:1;
  padding:10px;
  border-radius:5px;
  border:none;
}
#inputArea button{
  padding:10px;
  border-radius:5px;
  border:none;
  background:#FFD700;
  cursor:pointer;
  font-weight:bold;
}
</style>
</head>
<body>

<div id="userInfo">
  <div id="name"></div>
  <div id="email"></div>
  <button onclick="clearChat()">مسح الشات</button>
</div>

<div id="chatBox"></div>

<div id="inputArea">
  <input type="text" id="messageInput" placeholder="اكتب رسالتك">
  <button onclick="sendMessage()">Send</button>
</div>

<script>
const fullName = localStorage.getItem('fullName') || "Unknown";
const email = localStorage.getItem('email') || "Unknown";
document.getElementById('name').innerText = fullName;
document.getElementById('email').innerText = email;

function addMessage(text,sender){
  const chatBox = document.getElementById('chatBox');
  const msg = document.createElement('div');
  msg.textContent = text;
  msg.className = sender==='user'?'userMsg':'aiMsg';
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function clearChat(){
  document.getElementById('chatBox').innerHTML='';
}

// ارسال الرسائل للـ AI
async function sendMessage(){
  const messageInput = document.getElementById('messageInput');
  const message = messageInput.value.trim();
  if(!message) return;
  addMessage(message,'user');
  messageInput.value='';

  const response = await fetch("/api/chat",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({message})
  });
  const data = await response.json();
  addMessage(data.reply,'ai');
}
</script>

</body>
</html>

